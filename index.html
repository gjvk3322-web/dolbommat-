<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RE:BOOT PRO v3.0 | ë§ˆìŠ¤í„° í”Œëœ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f1f5f9; color: #1e293b; }
        
        /* 4ì—´ ë°°ì¹˜ë¥¼ ìœ„í•´ ê°€ë¡œí­ì„ ì‹œì›í•˜ê²Œ í™•ì¥ (PDF ì¶œë ¥ ì‹œ ìë™ ì¶•ì†Œë¨) */
        .dashboard-container { max-width: 1400px; margin: 0 auto; background: #ffffff; padding: 30px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        
        .section-title { font-size: 1.1rem; font-weight: 800; color: #1e293b; margin-bottom: 12px; display: flex; align-items: center; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; }
        .section-title i { color: #3b82f6; margin-right: 8px; }

        .step-col { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; }
        .step-header { font-size: 1rem; font-weight: 800; text-align: center; padding: 10px; border-radius: 8px; margin-bottom: 16px; color: white; letter-spacing: -0.02em; }
        
        .box-wrapper { background: #ffffff; border: 1px solid #cbd5e1; border-radius: 8px; overflow: hidden; margin-bottom: 12px; }
        .box-title { background-color: #f1f5f9; color: #334155; padding: 8px 12px; font-size: 0.85rem; font-weight: 700; border-bottom: 1px solid #e2e8f0; }
        
        textarea { width: 100%; border: none; padding: 12px; font-size: 0.85rem; line-height: 1.5; outline: none; resize: none; background: transparent; }
        textarea::placeholder { color: #94a3b8; font-style: italic; }
        
        /* ì›”ë³„ ëŒ€ì‹œë³´ë“œ ì¸í’‹ ìŠ¤íƒ€ì¼ */
        .month-box { background: #ffffff; border: 1px solid #cbd5e1; border-radius: 8px; flex: 1; min-width: 0; }
        .month-header { background: #3b82f6; color: white; text-align: center; font-weight: 800; font-size: 0.8rem; padding: 6px; border-radius: 7px 7px 0 0; }
        
        /* ë©”ëª¨ì¥ íŠ¹í™” ìŠ¤íƒ€ì¼ */
        .memo-pad { background-color: #fef9c3; border: 1px solid #fde047; box-shadow: inset 0 0 10px rgba(250, 204, 21, 0.2); }
        .memo-pad textarea { height: calc(100% - 40px); background: repeating-linear-gradient(transparent, transparent 27px, #fef08a 28px); line-height: 28px; padding-top: 4px; color: #854d0e; font-weight: 600; }
        
        .history-card { border-left: 5px solid #3b82f6; page-break-inside: avoid; }
    </style>
</head>
<body class="py-8 px-4">

    <div class="max-w-[1400px] mx-auto mb-6 flex justify-between items-end no-print">
        <div>
            <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">RE:BOOT <span class="text-blue-600">PRO v3.0</span></h1>
            <p class="text-sm text-gray-500 mt-1 font-medium">ê±°ì‹œì  ìš”ì•½ë¶€í„° ì›”ë³„ ì‹¤í–‰ê¹Œì§€, One-Page ì „ëµ ë§ˆìŠ¤í„°í”Œëœ</p>
        </div>
        <div class="flex gap-3 items-center">
            <select id="strategy-status" class="bg-white border border-gray-300 text-slate-700 h-[45px] px-4 rounded-lg font-bold outline-none">
                <option value="ì´ˆì•ˆ ì‘ì„±ì¤‘">ğŸ“ ì´ˆì•ˆ ì‘ì„±ì¤‘</option>
                <option value="ê²€í†  í•„ìš”">ğŸ” ê²€í†  í•„ìš”</option>
                <option value="ì‹¤í–‰ í™•ì •">ğŸš€ ì‹¤í–‰ í™•ì •</option>
            </select>
            <button onclick="saveToHistory()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg font-bold shadow-md transition-all">
                <i class="fas fa-save mr-2"></i> ì „ì²´ ì €ì¥
            </button>
            <button onclick="exportFullPDF()" class="bg-slate-800 hover:bg-slate-900 text-white px-6 py-2.5 rounded-lg font-bold shadow-md transition-all">
                <i class="fas fa-file-pdf mr-2"></i> PDF ì¶œë ¥
            </button>
        </div>
    </div>

    <div class="dashboard-container mb-10" id="canvas-area">
        
        <div class="mb-8 grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <div class="col-span-1 lg:col-span-1">
                <div class="section-title"><i class="fas fa-star"></i> ì „ëµ í•µì‹¬ ìš”ì•½ (Summary)</div>
                <div class="box-wrapper h-[115px] mb-0 border-blue-200 ring-2 ring-blue-50">
                    <textarea id="summary" class="h-full font-bold text-blue-900 bg-blue-50/30" placeholder="ê²°ë¡ ì ìœ¼ë¡œ ì´ ì „ëµì´ ë¬´ì—‡ì¸ì§€ í•œ ì¤„ë¡œ ìš”ì•½í•˜ì„¸ìš”. (ì˜ˆ: ê¸°ì¡´ ë§˜ì¹´í˜ ì±„ë„ì„ í™œìš©í•œ 1,000 ë§¤íŠ¸ ì‹œì¥ ì„ ì  ì „ëµ)"></textarea>
                </div>
            </div>

            <div class="col-span-1 lg:col-span-3">
                <div class="section-title"><i class="fas fa-calendar-alt"></i> ì›”ë³„ ì‹¤í–‰ ëŒ€ì‹œë³´ë“œ (Roadmap)</div>
                <div class="flex gap-2">
                    <div class="month-box"><div class="month-header">Month 1</div><textarea id="m1" class="h-[80px] p-2 text-[0.8rem]" placeholder="ìƒì„¸í˜ì´ì§€ ì œì‘"></textarea></div>
                    <div class="month-box"><div class="month-header">Month 2</div><textarea id="m2" class="h-[80px] p-2 text-[0.8rem]" placeholder="ì²´í—˜ë‹¨ 10ëª… ë°°í¬"></textarea></div>
                    <div class="month-box"><div class="month-header">Month 3</div><textarea id="m3" class="h-[80px] p-2 text-[0.8rem]" placeholder="SNS ê´‘ê³  ì§‘í–‰"></textarea></div>
                    <div class="month-box"><div class="month-header">Month 4</div><textarea id="m4" class="h-[80px] p-2 text-[0.8rem]" placeholder="ì˜¤í”„ë¼ì¸ ë¶€ìŠ¤ ì°¸ê°€"></textarea></div>
                    <div class="month-box"><div class="month-header">Month 5</div><textarea id="m5" class="h-[80px] p-2 text-[0.8rem]" placeholder="B2B íŒë¡œ ê°œì²™"></textarea></div>
                    <div class="month-box"><div class="month-header">Month 6</div><textarea id="m6" class="h-[80px] p-2 text-[0.8rem]" placeholder="ë§¤ì¶œ 50ì–µ ë‹¬ì„± ì ê²€"></textarea></div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-4 gap-4">
            
            <div class="step-col">
                <div class="step-header bg-slate-700">STEP 01. ë¬¸ì œ ì¸ì‹</div>
                <div class="box-wrapper"><div class="box-title">í˜„í™© (ì „ëµ ì œëª©)</div><textarea id="p1_1" class="h-[80px]"></textarea></div>
                <div class="box-wrapper"><div class="box-title">ì›ì¸ ê·œëª…</div><textarea id="p1_2" class="h-[80px]"></textarea></div>
                <div class="box-wrapper mb-0"><div class="box-title">í•µì‹¬ ê³¼ì œ ë„ì¶œ</div><textarea id="p1_3" class="h-[80px]"></textarea></div>
            </div>
            
            <div class="step-col">
                <div class="step-header bg-blue-700">STEP 02. ë°©ì•ˆ íƒìƒ‰</div>
                <div class="box-wrapper"><div class="box-title">í•´ê²° ëª©í‘œ ìˆ˜ë¦½</div><textarea id="p2_1" class="h-[80px]"></textarea></div>
                <div class="box-wrapper"><div class="box-title">í•´ê²° ë°©ì•ˆ íƒìƒ‰</div><textarea id="p2_2" class="h-[80px]"></textarea></div>
                <div class="box-wrapper mb-0"><div class="box-title">ëŒ€ì•ˆë³„ í‰ê°€</div><textarea id="p2_3" class="h-[80px]"></textarea></div>
            </div>
            
            <div class="step-col">
                <div class="step-header bg-indigo-700">STEP 03. ì„ ì • ë° ì‹¤í–‰</div>
                <div class="box-wrapper"><div class="box-title">ìµœì ì•ˆ ì„ ì •</div><textarea id="p3_1" class="h-[80px]"></textarea></div>
                <div class="box-wrapper mb-4"><div class="box-title">ì„¸ë¶€ ì‹¤í–‰ ê³„íš</div><textarea id="p3_2" class="h-[80px]"></textarea></div>
                <div class="bg-indigo-900 text-white rounded-lg h-[92px] flex items-center justify-center font-black text-lg tracking-widest shadow-inner border border-indigo-950">
                    EXECUTION
                </div>
            </div>

            <div class="step-col memo-pad relative overflow-hidden">
                <div class="absolute top-0 right-0 w-8 h-8 bg-yellow-400/50 transform rotate-45 translate-x-4 -translate-y-4"></div>
                <div class="text-[0.95rem] font-bold text-yellow-800 mb-2 border-b border-yellow-300 pb-2 flex items-center">
                    <i class="fas fa-thumbtack mr-2"></i> ì•„ì´ë””ì–´ ë©”ëª¨ì¥
                </div>
                <textarea id="memo" placeholder="ë¶ˆí˜„ë“¯ ë– ì˜¤ë¥¸ ì•„ì´ë””ì–´, ê²½ìŸì‚¬ ë²¤ì¹˜ë§ˆí‚¹ ë§í¬, ìœ ì˜ì‚¬í•­ ë“±ì„ ììœ ë¡­ê²Œ ì ì–´ë‘ì„¸ìš”!"></textarea>
            </div>
            
        </div>
    </div>

    <div class="max-w-[1400px] mx-auto">
        <h2 class="text-xl font-extrabold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-layer-group text-blue-600 mr-3"></i> í™•ì •ëœ ì „ëµ ì•„ì¹´ì´ë¸Œ
            <span id="history-count" class="ml-3 bg-blue-100 text-blue-700 text-sm font-bold px-3 py-1 rounded-full">0ê±´</span>
        </h2>
        <div id="history-container" class="space-y-4"></div>
    </div>

    <script>
        // ê´€ë¦¬í•  ëª¨ë“  ì…ë ¥ í•„ë“œ ëª©ë¡
        const fields = ['summary', 'm1', 'm2', 'm3', 'm4', 'm5', 'm6', 'p1_1', 'p1_2', 'p1_3', 'p2_1', 'p2_2', 'p2_3', 'p3_1', 'p3_2', 'memo'];
        const labels = ['ìš”ì•½', 'M1', 'M2', 'M3', 'M4', 'M5', 'M6', 'í˜„í™©', 'ì›ì¸', 'ê³¼ì œ', 'ëª©í‘œ', 'ëŒ€ì•ˆ', 'í‰ê°€', 'ê²°ì •', 'ê³„íš', 'ë©”ëª¨'];

        window.onload = () => renderHistory();

        function saveToHistory() {
            let hasContent = false;
            let currentStrategy = { 
                id: Date.now(), 
                date: new Date().toLocaleString('ko-KR'), 
                status: document.getElementById('strategy-status').value,
                details: {} 
            };

            fields.forEach((id, idx) => {
                const val = document.getElementById(id).value.trim();
                if(val) { currentStrategy.details[labels[idx]] = val; hasContent = true; }
            });

            if(!hasContent) return alert("ì €ì¥í•  ë‚´ìš©ì„ í•˜ë‚˜ë¼ë„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            let history = JSON.parse(localStorage.getItem('pro_v3_history') || "[]");
            history.unshift(currentStrategy);
            localStorage.setItem('pro_v3_history', JSON.stringify(history));

            fields.forEach(id => document.getElementById(id).value = "");
            renderHistory();
        }

        function renderHistory() {
            const container = document.getElementById('history-container');
            const history = JSON.parse(localStorage.getItem('pro_v3_history') || "[]");
            document.getElementById('history-count').innerText = `${history.length}ê±´`;

            if(history.length === 0) {
                container.innerHTML = `<div class="text-center py-8 bg-white rounded-xl shadow-sm text-gray-400">ì €ì¥ëœ ì „ëµì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            container.innerHTML = "";
            history.forEach((item, index) => {
                // í˜„í™©(p1_1)ì„ ì œëª©ìœ¼ë¡œ ì‚¬ìš©. ì—†ìœ¼ë©´ ê¸°ë³¸ ì œëª©
                const title = item.details["í˜„í™©"] || item.details["ìš”ì•½"] || `ìƒˆë¡œìš´ ë„ì•½ ì „ëµ #${history.length - index}`;
                
                // ìƒíƒœ íƒœê·¸ ìƒ‰ìƒ
                let statusColor = "bg-gray-100 text-gray-600";
                if(item.status.includes("ê²€í† ")) statusColor = "bg-orange-100 text-orange-700";
                if(item.status.includes("í™•ì •")) statusColor = "bg-green-100 text-green-700";

                // í•µì‹¬ ë‚´ìš©ë§Œ ê°„ëµíˆ í‘œì‹œë˜ë„ë¡ ì¡°ì ˆ (ì›”ë³„, ë©”ëª¨ ë“±ì€ ë¶ˆëŸ¬ì˜¤ê¸°ë¥¼ í†µí•´ í™•ì¸)
                const previewLabels = ['ìš”ì•½', 'ì›ì¸', 'ê³¼ì œ', 'ê²°ì •']; 
                const detailsHtml = previewLabels.map(key => {
                    if(item.details[key]) {
                        return `<div class="bg-gray-50 p-2 rounded border border-gray-100"><div class="text-[10px] font-bold text-blue-600 mb-1">${key}</div><div class="text-xs text-gray-700 truncate">${item.details[key]}</div></div>`;
                    }
                    return '';
                }).join('');

                container.innerHTML += `
                    <div id="card-${item.id}" class="history-card bg-white p-5 rounded-xl shadow-sm border border-gray-200">
                        <div class="flex justify-between items-center mb-3">
                            <div class="flex items-center">
                                <span class="${statusColor} text-[10px] font-bold px-2 py-1 rounded mr-3">${item.status}</span>
                                <h3 class="text-md font-extrabold text-gray-900">${title}</h3>
                            </div>
                            <div class="flex gap-2 no-print">
                                <button onclick="loadStrategy(${item.id})" class="text-xs bg-blue-50 text-blue-600 hover:bg-blue-100 px-3 py-1.5 rounded font-bold transition">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                                <button onclick="exportSingleCard(${item.id})" class="text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 px-3 py-1.5 rounded font-bold transition">PDF ë‹¤ìš´</button>
                                <button onclick="deleteStrategy(${item.id})" class="text-xs text-red-400 hover:text-red-600 p-1.5"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="grid grid-cols-4 gap-2">${detailsHtml}</div>
                    </div>
                `;
            });
        }

        function loadStrategy(id) {
            const history = JSON.parse(localStorage.getItem('pro_v3_history') || "[]");
            const item = history.find(h => h.id === id);
            if(item) {
                fields.forEach((fieldId, idx) => {
                    document.getElementById(fieldId).value = item.details[labels[idx]] || "";
                });
                document.getElementById('strategy-status').value = item.status || "ì´ˆì•ˆ ì‘ì„±ì¤‘";
                window.scrollTo({ top: 0, behavior: 'smooth' });
                alert("ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ! ìƒë‹¨ ìº”ë²„ìŠ¤ì—ì„œ ìˆ˜ì • í›„ ë‹¤ì‹œ ì €ì¥í•˜ì„¸ìš”.");
            }
        }

        function deleteStrategy(id) {
            if(confirm("ì´ ì „ëµì„ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                let history = JSON.parse(localStorage.getItem('pro_v3_history') || "[]");
                history = history.filter(h => h.id !== id);
                localStorage.setItem('pro_v3_history', JSON.stringify(history));
                renderHistory();
            }
        }

        function exportSingleCard(id) {
            const element = document.getElementById(`card-${id}`);
            const buttons = element.querySelector('.no-print');
            buttons.style.display = 'none';
            html2pdf().set({ margin: 10, filename: `Strategy_Card_${id}.pdf`, html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' } }).from(element).save().then(() => buttons.style.display = 'flex');
        }

        function exportFullPDF() {
            const element = document.getElementById('canvas-area');
            const opt = { margin: [5, 5, 5, 5], filename: `REBOOT_Master_Plan.pdf`, image: { type: 'jpeg', quality: 1 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' } };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
